{"version":3,"file":"svelte-imask.js","sources":["../src/action.ts"],"sourcesContent":["import IMask, { type FactoryArg, type InputMask, type UpdateOpts } from 'imask';\n\n\nfunction fireEvent<Opts extends FactoryArg> (el: HTMLElement, eventName: string, data: InputMask<Opts>) {\n  const e = document.createEvent('CustomEvent');\n  e.initCustomEvent(eventName, true, true, data);\n  el.dispatchEvent(e);\n}\n\nfunction initMask<Opts extends FactoryArg> (el: HTMLElement, opts: InputMask<Opts> | Opts) {\n  const maskRef = (opts instanceof IMask.InputMask ? opts : IMask(el, opts as Opts));\n  return maskRef\n    .on('accept', () => fireEvent(el, 'accept', maskRef))\n    .on('complete', () => fireEvent(el, 'complete', maskRef));\n}\n\n\nexport default\nfunction IMaskAction<Opts extends FactoryArg> (el: HTMLElement, opts: Opts) {\n  let maskRef: InputMask<Opts> | undefined = opts && initMask(el, opts);\n\n  function destroy (): void {\n    if (maskRef) {\n      maskRef.destroy();\n      maskRef = undefined;\n    }\n  }\n\n  function update (opts: InputMask<Opts> | Opts | UpdateOpts<Opts>): void {\n    if (!opts) return destroy();\n\n    if (opts instanceof IMask.InputMask) maskRef = opts;\n    else if (maskRef) maskRef.updateOptions(opts as UpdateOpts<Opts>);\n    else maskRef = initMask(el, opts as Opts);\n  }\n\n  return {\n    update,\n    destroy,\n  };\n}\n"],"names":["fireEvent","el","eventName","data","e","document","createEvent","initCustomEvent","dispatchEvent","initMask","opts","maskRef","IMask","InputMask","on","IMaskAction","destroy","undefined","update","updateOptions"],"mappings":";;;;;;;;;;EAGA,SAASA,SAASA,CAA2BC,EAAe,EAAEC,SAAiB,EAAEC,IAAqB,EAAE;EACtG,EAAA,MAAMC,CAAC,GAAGC,QAAQ,CAACC,WAAW,CAAC,aAAa,CAAC,CAAA;IAC7CF,CAAC,CAACG,eAAe,CAACL,SAAS,EAAE,IAAI,EAAE,IAAI,EAAEC,IAAI,CAAC,CAAA;EAC9CF,EAAAA,EAAE,CAACO,aAAa,CAACJ,CAAC,CAAC,CAAA;EACrB,CAAA;EAEA,SAASK,QAAQA,CAA2BR,EAAe,EAAES,IAA4B,EAAE;EACzF,EAAA,MAAMC,OAAO,GAAID,IAAI,YAAYE,sBAAK,CAACC,SAAS,GAAGH,IAAI,GAAGE,sBAAK,CAACX,EAAE,EAAES,IAAY,CAAE,CAAA;EAClF,EAAA,OAAOC,OAAO,CACXG,EAAE,CAAC,QAAQ,EAAE,MAAMd,SAAS,CAACC,EAAE,EAAE,QAAQ,EAAEU,OAAO,CAAC,CAAC,CACpDG,EAAE,CAAC,UAAU,EAAE,MAAMd,SAAS,CAACC,EAAE,EAAE,UAAU,EAAEU,OAAO,CAAC,CAAC,CAAA;EAC7D,CAAA;EAIA,SAASI,WAAWA,CAA2Bd,EAAe,EAAES,IAAU,EAAE;IAC1E,IAAIC,OAAoC,GAAGD,IAAI,IAAID,QAAQ,CAACR,EAAE,EAAES,IAAI,CAAC,CAAA;IAErE,SAASM,OAAOA,GAAU;EACxB,IAAA,IAAIL,OAAO,EAAE;QACXA,OAAO,CAACK,OAAO,EAAE,CAAA;EACjBL,MAAAA,OAAO,GAAGM,SAAS,CAAA;EACrB,KAAA;EACF,GAAA;IAEA,SAASC,MAAMA,CAAER,IAA+C,EAAQ;EACtE,IAAA,IAAI,CAACA,IAAI,EAAE,OAAOM,OAAO,EAAE,CAAA;EAE3B,IAAA,IAAIN,IAAI,YAAYE,sBAAK,CAACC,SAAS,EAAEF,OAAO,GAAGD,IAAI,CAAC,KAC/C,IAAIC,OAAO,EAAEA,OAAO,CAACQ,aAAa,CAACT,IAAwB,CAAC,CAAC,KAC7DC,OAAO,GAAGF,QAAQ,CAACR,EAAE,EAAES,IAAY,CAAC,CAAA;EAC3C,GAAA;IAEA,OAAO;MACLQ,MAAM;EACNF,IAAAA,OAAAA;KACD,CAAA;EACH;;;;;;;;;;;;"}